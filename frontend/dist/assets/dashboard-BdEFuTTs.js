var U=Object.defineProperty;var H=(t,s,a)=>s in t?U(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var w=(t,s,a)=>H(t,typeof s!="symbol"?s+"":s,a);import{j as e,u as B,r as p,d as _,x as q,D as J,C as G,ah as K,a0 as Q,ai as Y,aj as X,ak as Z,q as ee,a2 as se,al as te,m as ae,n as re}from"./react-vendor-DgS3FqxP.js";import{u as E,a as ne,S as z,H as A}from"./analytics-Z9aCQQ7P.js";import{a as O}from"./vendor-BIOr8nTg.js";const F={apiUrl:"http://localhost:5000/api/v1",wsUrl:"ws://localhost:3000"};class le{constructor(){w(this,"instance");w(this,"refreshTokenPromise",null);this.instance=O.create({baseURL:F.apiUrl,headers:{"Content-Type":"application/json"},timeout:3e4}),this.setupInterceptors()}setupInterceptors(){this.instance.interceptors.request.use(s=>{const a=this.getToken();return a&&s.headers&&(s.headers.Authorization=`Bearer ${a}`),s},s=>Promise.reject(s)),this.instance.interceptors.response.use(s=>s,async s=>{var c,o,u,d,j;const a=s.config;if(((c=s.response)==null?void 0:c.status)===401&&!a._retry){a._retry=!0;try{const x=await this.refreshAccessToken();if(x&&a.headers)return a.headers.Authorization=`Bearer ${x}`,this.instance(a)}catch(x){return this.handleLogout(),Promise.reject(x)}}const l={success:!1,message:((u=(o=s.response)==null?void 0:o.data)==null?void 0:u.message)||s.message||"An error occurred",errors:(j=(d=s.response)==null?void 0:d.data)==null?void 0:j.errors};return Promise.reject(l)})}async refreshAccessToken(){return this.refreshTokenPromise?this.refreshTokenPromise:(this.refreshTokenPromise=(async()=>{try{const s=this.getRefreshToken();if(!s)throw new Error("No refresh token available");const a=await O.post(`${F.apiUrl}/auth/refresh`,{refreshToken:s});if(a.data.success&&a.data.data)return this.setToken(a.data.data.token),this.setRefreshToken(a.data.data.refreshToken),a.data.data.token;throw new Error("Token refresh failed")}catch(s){throw this.handleLogout(),s}finally{this.refreshTokenPromise=null}})(),this.refreshTokenPromise)}getToken(){return localStorage.getItem("token")}getRefreshToken(){return localStorage.getItem("refreshToken")}setToken(s){localStorage.setItem("token",s)}setRefreshToken(s){localStorage.setItem("refreshToken",s)}handleLogout(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login")}setAuthTokens(s,a){this.setToken(s),this.setRefreshToken(a)}clearAuthTokens(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}getInstance(){return this.instance}}const k=new le,b=k.getInstance(),ue=(t,s)=>{k.setAuthTokens(t,s)},fe=()=>{k.clearAuthTokens()};function ie({salesData:t}){const{t:s}=E();if(!t||!t.labels||!t.data)return e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:s("loadingChart")});const a=6e3,l=250,c=500,o={top:40,right:40,bottom:60,left:80},u=c-o.left-o.right,d=l-o.top-o.bottom,j=t.data.map((m,h)=>{const y=o.left+h/(t.data.length-1)*u,N=o.top+d-m/a*d;return{x:y,y:N}}),x=[0,2e3,4e3,6e3];return e.jsx("div",{className:"w-full",children:e.jsxs("svg",{className:"w-full",viewBox:"0 0 500 250",preserveAspectRatio:"xMidYMid meet",children:[x.map(m=>{const h=o.top+d-m/a*d;return e.jsxs("g",{children:[e.jsx("line",{x1:o.left,y1:h,x2:c-o.right,y2:h,stroke:"#E5E7EB",strokeWidth:"0.5"}),e.jsx("text",{x:o.left-10,y:h+4,textAnchor:"end",style:{fontSize:"12",fill:"#6B7280",fontFamily:"system-ui, -apple-system, sans-serif"},children:m===0?"0":`${m/1e3}k`})]},m)}),e.jsx("text",{x:30,y:l/2,textAnchor:"middle",transform:`rotate(-90, 30, ${l/2})`,style:{fontSize:"14",fill:"#6B7280",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"500"},children:"Sales ($)"}),e.jsx("path",{d:`M ${j.map(m=>`${m.x},${m.y}`).join(" L ")}`,fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((m,h)=>e.jsx("circle",{cx:m.x,cy:m.y,r:"5",fill:"#3B82F6",stroke:"#fff",strokeWidth:"2"},h)),e.jsx("g",{children:t.labels.map((m,h)=>{const y=o.left+h/(t.labels.length-1)*u;return e.jsx("text",{x:y,y:l-20,textAnchor:"middle",style:{fontSize:"12",fill:"#6B7280",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"500"},children:m},h)})}),e.jsxs("g",{children:[e.jsx("line",{x1:c/2-25,y1:l-8,x2:c/2-8,y2:l-8,stroke:"#3B82F6",strokeWidth:"2.5"}),e.jsx("circle",{cx:c/2-8,cy:l-8,r:"4",fill:"#3B82F6",stroke:"#fff",strokeWidth:"2"}),e.jsx("text",{x:c/2+5,y:l-4,style:{fontSize:"14",fill:"#111827",fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:"700"},children:"Sales"})]})]})})}const oe={async getVendors(t){const s=new URLSearchParams;t!=null&&t.status&&s.append("status",t.status),t!=null&&t.page&&s.append("page",t.page.toString()),t!=null&&t.limit&&s.append("limit",t.limit.toString());const a=await b.get(`/vendors?${s.toString()}`);if(a.data.success&&a.data.data)return{vendors:a.data.data.vendors||[],pagination:a.data.pagination};throw new Error(a.data.message||"Failed to fetch vendors")},async getVendorById(t){const s=await b.get(`/vendors/${t}`);if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.message||"Failed to fetch vendor")},async createVendor(t){const s=await b.post("/vendors",t);if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.message||"Failed to create vendor")},async updateVendor(t,s){const a=await b.patch(`/vendors/${t}`,s);if(a.data.success&&a.data.data)return a.data.data;throw new Error(a.data.message||"Failed to update vendor")},async approveVendor(t){const s=await b.post(`/vendors/${t}/approve`,{});if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.message||"Failed to approve vendor")},async rejectVendor(t,s){const a=await b.post(`/vendors/${t}/reject`,s);if(a.data.success&&a.data.data)return a.data.data;throw new Error(a.data.message||"Failed to reject vendor")},async suspendVendor(t){const s=await b.post(`/vendors/${t}/suspend`,{});if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.message||"Failed to suspend vendor")},async getMyProfile(){const t=await b.get("/vendors/me");if(t.data.success&&t.data.data)return t.data.data.vendor;throw new Error(t.data.message||"Failed to fetch vendor profile")}};function M(){var S,C,P,$,T,R;const{t,language:s}=E(),a=B(),[l,c]=p.useState(null),[o,u]=p.useState(!0),[d,j]=p.useState(0),[x,m]=p.useState(null),[h,y]=p.useState(""),N=p.useCallback(async()=>{try{const v=await oe.getMyProfile();m(v.status||"pending"),y(v.name||"Vendor")}catch(v){console.error("Failed to fetch vendor profile:",v),m(null),y("")}const r=s==="ar";c({metrics:{uncompletedOrders:24,totalOrders:156,totalRevenue:12450,pendingPayouts:2340},recentOrders:[{id:"#ORD-89",customer:"Sarah Johnson",amount:84.56,status:"Completed"},{id:"#ORD-803",customer:"Mike Chen",amount:324,status:"Pending"},{id:"#ORD-805",customer:"Emma Davis",amount:47.21,status:"Shipped"}],ordersStatus:{},bestSellingProducts:[{name:r?"سماعات لاسلكية":"Wireless Headphones",sales:48,revenue:1480},{name:r?"غلاف الهاتف":"Phone Case",sales:38,revenue:280},{name:r?"ساعة ذكية":"Smart Watch",sales:34,revenue:480}],productInsights:{lowStock:8,outOfStock:3},customerInsights:{newCustomers:12,returningRate:68,topCustomer:{name:"Sarah Johnson",amount:890}},notifications:[{icon:"payment",message:r?"تم استلام الدفع":"Payment Received",detail:r?"الطلب #ORD-001 - $89.50":"Order #ORD-001 - $89.50"},{icon:"update",message:r?"تحديث النظام":"System Update",detail:r?"ميزات جديدة متاحة":"New features available"},{icon:"shipped",message:r?"تم شحن الطلب":"Order Shipped",detail:r?"الطلب #ORD-003 - تم الشحن":"Order #ORD-003 dispatched"}],topSellingProducts:[{name:"Mazad Hoodie",image:"/images/sidebar-topicon.png",size:"L",sales:120},{name:"Wireless Earbuds",image:"/images/sidebar-topicon.png",size:"—",sales:210},{name:"Gaming Mouse",image:"/images/sidebar-topicon.png",size:"—",sales:160}],newCustomers:[{name:"Ayesha Khan",phone:"+92 300 0000000",image:"/images/sidebar-topicon.png"},{name:"Ahmed Raza",phone:"+92 311 1111111",image:"/images/sidebar-topicon.png"},{name:"Maryam Ali",phone:"+92 322 2222222",image:"/images/sidebar-topicon.png"},{name:"Bilal Hassan",phone:"+92 333 3333333",image:"/images/sidebar-topicon.png"}],recentReviews:[{name:"Hira",phone:"+92 340 1234567",image:"/images/sidebar-topicon.png",rating:5,review:r?"جودة عالية وتوصيل سريع!":"Great quality and fast delivery!"},{name:"Omar",phone:"+92 345 9876543",image:"/images/sidebar-topicon.png",rating:4,review:r?"المنتج كما هو موضح، سأشتريه مرة أخرى.":"Product as described, will buy again."}],salesPerformance:{labels:r?["يناير","فبراير","مارس","أبريل","مايو","يونيو"]:["Jan","Feb","Mar","Apr","May","Jun"],data:[1200,2e3,3e3,4800,3600,4200]}}),u(!1)},[s]);if(p.useEffect(()=>{N()},[N]),p.useEffect(()=>{if(l!=null&&l.recentReviews&&l.recentReviews.length>1){j(0);const r=setInterval(()=>{j(i=>(i+1)%l.recentReviews.length)},5e3);return()=>clearInterval(r)}},[l]),o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:t("loading")||"Loading dashboard data..."})});if(!l)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-red-500",children:t("failedToLoad")})});const{metrics:g,recentOrders:I,ordersStatus:ce,bestSellingProducts:D,productInsights:me,customerInsights:n,notifications:L,topSellingProducts:W,newCustomers:V,recentReviews:f}=l||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-100 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-700 mb-1",children:t("welcomeBack")}),e.jsx("p",{className:"text-lg text-gray-600",children:h||"Vendor"})]}),x&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${x==="approved"?"bg-green-100 text-green-700":x==="rejected"?"bg-red-100 text-red-700":x==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:x==="approved"?"✓ Approved":x==="rejected"?"✗ Rejected":x==="pending"?"⏳ Pending":x})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"rounded-lg p-4 text-white relative overflow-hidden",style:{background:"linear-gradient(135deg, #60A5FA 0%, #3B82F6 100%)"},children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:t("uncompletedOrders")}),e.jsx("p",{className:"text-3xl font-bold",children:(g==null?void 0:g.uncompletedOrders)||0})]}),e.jsx("div",{className:"absolute bottom-4 right-4 p-3 rounded-lg",style:{backgroundColor:"rgba(37, 99, 235, 0.8)"},children:e.jsx(_,{size:28})})]}),e.jsxs("div",{className:"rounded-lg p-4 text-white relative overflow-hidden",style:{background:"linear-gradient(135deg, #34D399 0%, #10B981 100%)"},children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:t("totalOrders")}),e.jsx("p",{className:"text-3xl font-bold",children:(g==null?void 0:g.totalOrders)||0})]}),e.jsx("div",{className:"absolute bottom-4 right-4 p-3 rounded-lg",style:{backgroundColor:"rgba(5, 150, 105, 0.8)"},children:e.jsx(q,{size:28})})]}),e.jsxs("div",{className:"rounded-lg p-4 text-white relative overflow-hidden",style:{background:"linear-gradient(135deg, #A78BFA 0%, #8B5CF6 100%)"},children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:t("totalRevenue")}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",((g==null?void 0:g.totalRevenue)||0).toLocaleString()]})]}),e.jsx("div",{className:"absolute bottom-4 right-4 p-3 rounded-lg",style:{backgroundColor:"rgba(124, 58, 237, 0.8)"},children:e.jsx(J,{size:28})})]}),e.jsxs("div",{className:"rounded-lg p-4 text-white relative overflow-hidden",style:{background:"linear-gradient(135deg, #FB923C 0%, #F97316 100%)"},children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:t("pendingPayouts")}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",((g==null?void 0:g.pendingPayouts)||0).toLocaleString()]})]}),e.jsx("div",{className:"absolute bottom-4 right-4 p-3 rounded-lg",style:{backgroundColor:"rgba(217, 70, 22, 0.8)"},children:e.jsx(G,{size:28})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Orders"}),e.jsx("button",{onClick:()=>a("/orders"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",type:"button",children:"View All >"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-600",children:"Status"})]})}),e.jsx("tbody",{className:"text-gray-900",children:(I||[]).map((r,i)=>{const v=r.id.replace(/[^0-9]/g,"");return e.jsxs("tr",{onClick:()=>a(`/orders/${v}`),className:"border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:r.id}),e.jsx("td",{className:"py-3 px-4",children:r.customer}),e.jsxs("td",{className:"py-3 px-4 font-semibold",children:["$",r.amount.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold text-white ${r.status==="Completed"?"bg-green-500":r.status==="Processing"?"bg-yellow-500":r.status==="Shipped"?"bg-blue-500":"bg-red-500"}`,children:r.status})})]},i)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Sales Performance"})}),e.jsx(ie,{salesData:l==null?void 0:l.salesPerformance})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Orders Status Breakdown"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",className:"mb-6",children:[e.jsx("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:"none"}),e.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"none",stroke:"#10b981",strokeWidth:"20",strokeDasharray:`${2*Math.PI*35*.45} ${2*Math.PI*35}`,strokeDashoffset:0,transform:"rotate(-90 100 100)"}),e.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"none",stroke:"#f59e0b",strokeWidth:"20",strokeDasharray:`${2*Math.PI*35*.25} ${2*Math.PI*35}`,strokeDashoffset:`${-2*Math.PI*35*.45}`,transform:"rotate(-90 100 100)"}),e.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"none",stroke:"#3b82f6",strokeWidth:"20",strokeDasharray:`${2*Math.PI*35*.2} ${2*Math.PI*35}`,strokeDashoffset:`${-2*Math.PI*35*.7}`,transform:"rotate(-90 100 100)"}),e.jsx("circle",{cx:"100",cy:"100",r:"35",fill:"none",stroke:"#ef4444",strokeWidth:"20",strokeDasharray:`${2*Math.PI*35*.1} ${2*Math.PI*35}`,strokeDashoffset:`${-2*Math.PI*35*.9}`,transform:"rotate(-90 100 100)"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Processing"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Shipped"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Best Selling Products"}),e.jsx("div",{className:"space-y-3",children:(D||[]).map((r,i)=>e.jsxs("div",{onClick:()=>a("/products"),className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsxs("div",{className:`p-2 rounded-lg ${i===0?"bg-blue-500":i===1?"bg-green-500":"bg-purple-300"}`,children:[i===0&&e.jsx(K,{size:20,className:"text-white"}),i===1&&e.jsx(Q,{size:20,className:"text-white"}),i===2&&e.jsx(Y,{size:20,className:"text-white"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.sales," sold"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",r.revenue.toLocaleString()]})})]},i))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Product Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>a("/products"),className:"w-full flex items-center justify-between bg-pink-100 rounded-lg p-3 hover:bg-pink-200 transition-colors",type:"button",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{size:20,className:"text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Low Stock"})]}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:"8 items"})]}),e.jsxs("button",{onClick:()=>a("/products"),className:"w-full flex items-center justify-between bg-orange-100 rounded-lg p-3 hover:bg-orange-200 transition-colors",type:"button",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{size:20,className:"text-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Out of Stock"})]}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:"3 items"})]}),e.jsxs("button",{onClick:()=>a("/products/add"),className:"w-full bg-blue-100 py-3 px-4 rounded-lg hover:bg-blue-200 transition-colors flex items-center justify-center space-x-2",type:"button",children:[e.jsx("span",{className:"text-2xl text-blue-600",children:"+"}),e.jsx("span",{className:"text-blue-600 font-bold",children:"Quick Add Product"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Customer Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-green-100 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"New Customers"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"This week"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:(n==null?void 0:n.newCustomers)||0})]}),e.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Returning Rate"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Customer retention"})]}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[(n==null?void 0:n.returningRate)||0,"%"]})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg p-3 flex items-center space-x-3",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(((S=n==null?void 0:n.topCustomer)==null?void 0:S.name)||"Customer")}&size=48&background=random`,alt:((C=n==null?void 0:n.topCustomer)==null?void 0:C.name)||"Customer",className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Top Customer"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((P=n==null?void 0:n.topCustomer)==null?void 0:P.name)||"N/A",(($=n==null?void 0:n.topCustomer)==null?void 0:$.amount)&&` - $${n.topCustomer.amount}`,((T=n==null?void 0:n.topCustomer)==null?void 0:T.phone)&&!((R=n==null?void 0:n.topCustomer)!=null&&R.amount)&&` - ${n.topCustomer.phone}`]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Notifications"}),e.jsx("div",{className:"space-y-3",children:(L||[]).map((r,i)=>e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg ${r.icon==="payment"?"bg-yellow-100":r.icon==="update"?"bg-blue-100":"bg-green-100"}`,children:[e.jsxs("div",{className:`flex-shrink-0 p-2 rounded-lg ${r.icon==="payment"?"bg-yellow-200":r.icon==="update"?"bg-blue-200":"bg-green-200"}`,children:[r.icon==="payment"&&e.jsx(ee,{size:20,className:"text-yellow-600"}),r.icon==="update"&&e.jsx(se,{size:20,className:"text-blue-600"}),r.icon==="shipped"&&e.jsx(te,{size:20,className:"text-green-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.message}),e.jsx("p",{className:"text-xs text-gray-600",children:r.detail})]})]},i))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Top Selling Products"}),e.jsx("div",{className:"space-y-4",children:(W||[]).map((r,i)=>e.jsxs("div",{onClick:()=>a("/products"),className:"flex items-center justify-between hover:bg-gray-50 p-2 rounded-lg cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.size})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[r.sales," Sales"]})})]},i))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"New Customers"}),e.jsx("div",{className:"space-y-4",children:(V||[]).map((r,i)=>e.jsxs("div",{className:`flex items-center space-x-3 py-2 px-2 rounded ${i===3?"bg-gray-50":""}`,children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.phone})]})]},i))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Reviews"})}),f&&f.length>0&&f[d]&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("img",{src:f[d].image,alt:f[d].name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f[d].name}),e.jsx("p",{className:"text-xs text-gray-500",children:f[d].phone})]})]}),e.jsx("div",{className:"flex items-center mb-3 space-x-1",children:[...Array(5)].map((r,i)=>e.jsx(ae,{size:16,fill:i<f[d].rating?"#facc15":"none",className:i<f[d].rating?"text-yellow-400":"text-gray-300"},i))}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:f[d].review}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(f.length)].map((r,i)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-300 ${i===d?"bg-gray-800":"bg-gray-300"}`},i))}),e.jsx("button",{onClick:()=>a("/products"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",type:"button",children:"View All >"})]})]})]})]})]})}function de(){const{role:t,isSubAdmin:s,setRole:a}=ne(),l=B(),[c,o]=p.useState(!1),[u,d]=p.useState(!1);return p.useEffect(()=>{t||a("vendor")},[t,a]),p.useEffect(()=>{s&&l("/sub-admin/users")},[s,l]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c&&e.jsx("div",{className:"fixed inset-0 z-[45] bg-black bg-opacity-50 lg:hidden",onClick:()=>o(!1)}),e.jsxs("div",{className:"hidden lg:flex h-screen overflow-hidden",children:[!u&&e.jsx("div",{className:"w-64 flex-shrink-0 bg-primary-500 h-screen overflow-y-auto",children:e.jsx(z,{onClose:()=>d(!0),currentPage:"dashboard"})}),u&&e.jsx("button",{onClick:()=>d(!1),className:"fixed left-0 top-4 z-30 bg-primary-500 text-white p-2 rounded-r-lg hover:bg-primary-600 transition-colors","aria-label":"Toggle sidebar",children:e.jsx(re,{size:24})}),e.jsxs("div",{className:`flex-1 flex flex-col h-screen overflow-hidden bg-gray-50 ${u?"w-full":""}`,children:[e.jsx("div",{className:"flex-shrink-0 sticky top-0 z-10 bg-white border-b border-gray-200",children:e.jsx(A,{})}),e.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6",children:!s&&e.jsx(M,{})})]})]}),e.jsxs("div",{className:"lg:hidden",children:[c&&e.jsx("div",{className:"fixed inset-0 z-[45] bg-black bg-opacity-50 lg:hidden",onClick:()=>o(!1)}),e.jsx("div",{className:`
          fixed inset-y-0 left-0 z-[60] w-64 transform transition-transform duration-300 ease-in-out
          ${c?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(z,{onClose:()=>o(!1),currentPage:"dashboard"})}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen bg-gray-50 pt-20 lg:pt-0",children:[e.jsx(A,{onToggleSidebar:()=>o(!c),isSidebarOpen:c}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4",children:!s&&e.jsx(M,{})})]})]})]})}const je=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{je as D,b as a,fe as c,ue as s};
